---
name: AutoTester
description: >
  A suite of tools for running automated end-to-end (E2E) tests using Playwright and performing AI-driven self-healing on detected errors.
---

# AutoTester Skill Instructions ðŸ§ª

This skill provides a robust framework for testing the tsgabrielleÂ® web application. It automates browser interactions (visiting pages, clicking buttons, filling forms) to verify functionality and uses AI analysis to diagnose and potentially fix issues.

## 1. Prerequisites (Run Once)

Ensure Playwright is installed in the workspace.

```bash
npm install -D @playwright/test
npx playwright install chromium --with-deps
```

## 2. Generating Tests

When the user asks to "test" a specific feature (e.g., "Test the checkout flow" or "Verify the product page loads"), do not manually browse. Instead:

1. **Analyze the Requirement**: Understand the user flow (e.g., Homepage -> Click Product -> Add to Cart).
2. **Generate Spec File**: Create a new file `e2e/[feature-name].spec.ts` using the template below.
3. **Use Locators**: Prefer user-facing locators like `getByRole`, `getByText`, or `getByLabel`. Avoid rigid CSS selectors if possible.

### Test Template

```typescript
import { test, expect } from '@playwright/test';

test('User Flow: [Feature Name]', async ({ page }) => {
  // 1. Visit URL
  await page.goto('http://localhost:3000/[route]');

  // 2. Interaction Steps
  await page.getByRole('button', { name: 'Add to Cart' }).click();

  // 3. Assertions
  await expect(page.getByText('Added to Bag')).toBeVisible();
});
```

## 3. Running Tests

Execute the tests using the helper script or direct CLI.

**Command:**

```bash
npx playwright test e2e/[feature-name].spec.ts
```

**Options:**

- `--headed`: Run with visible browser (useful for debugging).
- `--debug`: Run in inspector mode.

## 4. Self-Healing Protocol (AI Analysis) ðŸš‘

If a test **fails**:

1. **Read the Report**: Playwright generates an HTML report and console output. Read the error message carefully.
2. **Analyze Context**:
    - **TimeoutError**: Element didn't appear. Is the selector wrong? Is the network slow?
    - **ReferenceError**: Code syntax issue.
    - **AssertionError**: The UI state didn't match expectation (e.g., "Cart (0)" vs "Cart (1)").
3. **Inspect Source**: Use `grep_search` or `view_file` to find the component code related to the failing test.
4. **Propose Fix**:
    - **If Selector**: Update the test spec to match the actual component code.
    - **If Bug**: Fix the React component itself.
    - **If Flaky**: Add `await expect(...).toBeVisible()` wait steps.

## 5. Artifacts

- **e2e/**: Directory for all test specs.
- **playwright.config.ts**: Main configuration (ensure `baseURL` is set to localhost).

---
*Generated by Antigravity AutoTester Skill*
